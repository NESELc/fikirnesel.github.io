<!DOCTYPE html>
<html lang="tr">
<head>
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-GD0LRD6N1S"></script>
  <script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js',new Date());gtag('config','G-GD0LRD6N1S');</script>
  <meta name="google-adsense-account" content="ca-pub-1268402107177386">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Oyunlar | Online</title>
  <meta name="description" content="Eğlenceli oyunlar">
  <meta name="robots" content="index,follow">
  <link rel="canonical" href="https://nesel.tr/oyunlar.html">
  <meta property="og:title" content="Online Oyunlar">
  <meta property="og:description" content="Çizim yap.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://nesel.tr/oyunlar.html">

  <style>
    #oyunWrap{max-width:520px;margin:20px auto;padding:10px;border:1px solid #ddd;border-radius:10px;background:#f6f6f6}
    #oyunBar{display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin-bottom:8px}
    #oyunBar button{padding:7px 11px;border:1px solid #ddd;border-radius:8px;background:#fff;cursor:pointer}
    #oyunBar small{opacity:.8}
    #game{width:100%;height:520px;border:1px solid #ddd;border-radius:10px;background:#fff;touch-action:manipulation}
  </style>
</head>
<body>
  <div id="oyunWrap">
  <div id="oyunBar">
    <button id="btnReset" type="button">Sıfırla</button>
    <span id="msg">Bir köşe seç.</span>
    <small id="stat"></small>
  </div>
  <canvas id="game"></canvas>
</div>


<script>
(() => {
  const cv=document.getElementById("game"),ctx=cv.getContext("2d");
  const msg=document.getElementById("msg"),stat=document.getElementById("stat"),btn=document.getElementById("btnReset");
  const S={pad:70,r:10,hit:18};
  const E=[[0,1],[1,2],[2,3],[3,0]];
  let nodes=[],selected=-1,walk=[],visitedE=new Set(),lastEdge=null,dead=false;

  const DPR=()=>Math.max(1,Math.min(2,window.devicePixelRatio||1));
  const R=()=>cv.getBoundingClientRect();
  const key=(a,b)=>{const x=Math.min(a,b),y=Math.max(a,b);return x+"-"+y;};
  const isAdj=(a,b)=>E.some(e=>(e[0]===a&&e[1]===b)||(e[0]===b&&e[1]===a));

  function fit(){
    const r=R(),k=DPR();
    cv.width=Math.floor(r.width*k);cv.height=Math.floor(r.height*k);
    ctx.setTransform(k,0,0,k,0,0);
    reset();
  }

  function buildNodes(){
    const w=R().width,h=R().height,sz=Math.min(w,h)-S.pad*2;
    const x0=(w-sz)/2,y0=(h-sz)/2,x1=x0+sz,y1=y0+sz;
    nodes=[{x:x0,y:y0},{x:x1,y:y0},{x:x1,y:y1},{x:x0,y:y1}];
  }

  function draw(){
    const w=R().width,h=R().height;ctx.clearRect(0,0,w,h);
    const a=nodes[0],b=nodes[2];

    ctx.lineWidth=5;ctx.strokeStyle="#111";
    ctx.strokeRect(a.x,a.y,b.x-a.x,b.y-a.y);

    ctx.lineWidth=7;ctx.lineCap="round";
    for(const e of E){
      const k=key(e[0],e[1]);
      if(!visitedE.has(k))continue;
      ctx.strokeStyle="#2f6fff";
      ctx.beginPath();ctx.moveTo(nodes[e[0]].x,nodes[e[0]].y);ctx.lineTo(nodes[e[1]].x,nodes[e[1]].y);ctx.stroke();
    }

    ctx.lineWidth=4;ctx.strokeStyle="rgba(46,213,115,.95)";
    ctx.beginPath();
    for(let i=0;i<walk.length;i++){
      const p=nodes[walk[i]];
      if(!i)ctx.moveTo(p.x,p.y);else ctx.lineTo(p.x,p.y);
    }
    if(walk.length>1)ctx.stroke();

    nodes.forEach((p,i)=>{
      ctx.beginPath();
      ctx.fillStyle=i===selected?"#ffcc00":"#111";
      ctx.arc(p.x,p.y,S.r,0,Math.PI*2);
      ctx.fill();
      ctx.lineWidth=2;ctx.strokeStyle="#fff";ctx.stroke();
    });

    stat.textContent=`Kenar: ${visitedE.size}/4`;
  }

  function dist(a,b){return Math.hypot(a.x-b.x,a.y-b.y);}
  function hitNode(x,y){
    for(let i=0;i<nodes.length;i++)if(dist(nodes[i],{x,y})<=S.hit)return i;
    return -1;
  }

  function possibleMoves(from){
    return E
      .map(e=>e[0]===from?e[1]:e[1]===from?e[0]:-1)
      .filter(n=>n>=0)
      .filter(n=>{
        const k=key(from,n);
        if(lastEdge && k===lastEdge) return false; // geri dönme yasağı
        return true;
      });
  }

  function winCheck(){
    if(visitedE.size===4){
      msg.textContent="Tebrikler! Tüm kenarlardan geçtin ✅";
      dead=true;
    }
  }

  function deadCheck(){
    if(visitedE.size===4) return;
    if(possibleMoves(selected).length===0){
      msg.textContent="Olmadı ❌ (hamle kalmadı)";
      dead=true;
    }
  }

  function reset(){
    buildNodes();
    selected=-1;
    walk=[];
    visitedE=new Set();
    lastEdge=null;
    dead=false;
    msg.textContent="Bir köşe seç.";
    draw();
  }

  cv.addEventListener("click",e=>{
    if(dead)return;
    const r=R(),x=e.clientX-r.left,y=e.clientY-r.top;
    const n=hitNode(x,y);
    if(n<0)return;

    if(selected<0){
      selected=n;walk=[n];
      msg.textContent="Komşu köşeye git (geri dönüş yasak).";
      draw();return;
    }

    if(n===selected)return;
    if(!isAdj(selected,n)){
      msg.textContent="Sadece komşu köşeye gidebilirsin.";
      return;
    }

    const k=key(selected,n);
    if(lastEdge===k){
      msg.textContent="Geri dönemezsin.";
      return;
    }

    visitedE.add(k);
    lastEdge=k;
    selected=n;
    walk.push(n);
    msg.textContent="Devam et: 4 kenarı da tamamla.";
    draw();
    winCheck();
    deadCheck();
  });

  btn.addEventListener("click",reset);
  window.addEventListener("resize",fit);
  fit();
})();
</script>


  </body>
</html>
