<!DOCTYPE html>
<html lang="tr">
<head>
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-GD0LRD6N1S"></script>
  <script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js',new Date());gtag('config','G-GD0LRD6N1S');</script>
  <meta name="google-adsense-account" content="ca-pub-1268402107177386">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Oyunlar | Online</title>
  <meta name="description" content="Eğlenceli oyunlar">
  <meta name="robots" content="index,follow">
  <link rel="canonical" href="https://nesel.tr/oyunlar.html">
  <meta property="og:title" content="Online Oyunlar">
  <meta property="og:description" content="Çizim yap.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://nesel.tr/oyunlar.html">

  <style>
    #oyunWrap{max-width:520px;margin:20px auto;padding:10px;border:1px solid #ddd;border-radius:10px;background:#f6f6f6}
    #oyunBar{display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin-bottom:8px}
    #oyunBar button{padding:7px 11px;border:1px solid #ddd;border-radius:8px;background:#fff;cursor:pointer}
    #oyunBar small{opacity:.8}
    #game{width:100%;height:520px;border:1px solid #ddd;border-radius:10px;background:#fff;touch-action:manipulation}
  </style>
</head>
<body>
  <div id="oyunWrap">
  <div id="oyunBar">
    <button id="btnReset" type="button">Sıfırla</button>
    <span id="msg">Bir köşe seç.</span>
    <small id="stat"></small>
  </div>
  <canvas id="game"></canvas>
</div>


<script>
(() => {
  const cv=document.getElementById("game"),ctx=cv.getContext("2d");
  const msg=document.getElementById("msg"),stat=document.getElementById("stat"),btn=document.getElementById("btnReset");
  const S={pad:70,r:10,hit:18};
  let nodes=[],edges=[],selected=-1,visited=new Set();

  const DPR=()=>Math.max(1,Math.min(2,window.devicePixelRatio||1));
  const R=()=>cv.getBoundingClientRect();

  function fit(){
    const r=R(),k=DPR();
    cv.width=Math.floor(r.width*k);cv.height=Math.floor(r.height*k);
    ctx.setTransform(k,0,0,k,0,0);
    init();
  }

  function init(){
    const w=R().width,h=R().height,sz=Math.min(w,h)-S.pad*2;
    const x0=(w-sz)/2,y0=(h-sz)/2,x1=x0+sz,y1=y0+sz;
    nodes=[{x:x0,y:y0},{x:x1,y:y0},{x:x1,y:y1},{x:x0,y:y1}];
    edges=[];selected=-1;visited=new Set();
    msg.textContent="Bir köşe seç.";
    draw();
  }

  function draw(){
    const w=R().width,h=R().height;ctx.clearRect(0,0,w,h);
    const a=nodes[0],b=nodes[2];
    ctx.lineWidth=4;ctx.strokeStyle="#111";
    ctx.strokeRect(a.x,a.y,b.x-a.x,b.y-a.y);

    ctx.lineWidth=6;ctx.strokeStyle="#2f6fff";
    edges.forEach(e=>{ctx.beginPath();ctx.moveTo(nodes[e.a].x,nodes[e.a].y);ctx.lineTo(nodes[e.b].x,nodes[e.b].y);ctx.stroke();});

    nodes.forEach((p,i)=>{
      ctx.beginPath();
      ctx.fillStyle=i===selected?"#ffcc00":(visited.has(i)?"#2ed573":"#111");
      ctx.arc(p.x,p.y,S.r,0,Math.PI*2);
      ctx.fill();
      ctx.lineWidth=2;ctx.strokeStyle="#fff";ctx.stroke();
    });

    stat.textContent=`Ziyaret: ${visited.size}/${nodes.length} • Çizgi: ${edges.length}`;
  }

  function dist(a,b){return Math.hypot(a.x-b.x,a.y-b.y);}
  function hitNode(x,y){
    for(let i=0;i<nodes.length;i++){
      if(dist(nodes[i],{x,y})<=S.hit)return i;
    }
    return -1;
  }

  function edgeExists(a,b){
    return edges.some(e=>(e.a===a&&e.b===b)||(e.a===b&&e.b===a));
  }

  function orient(ax,ay,bx,by,cx,cy){
    const v=(by-ay)*(cx-bx)-(bx-ax)*(cy-by);
    return Math.abs(v)<1e-9?0:(v>0?1:2);
  }

  function onSeg(ax,ay,bx,by,cx,cy){
    return Math.min(ax,bx)-1e-9<=cx&&cx<=Math.max(ax,bx)+1e-9&&Math.min(ay,by)-1e-9<=cy&&cy<=Math.max(ay,by)+1e-9;
  }

  function segIntersect(p1,p2,q1,q2){
    const o1=orient(p1.x,p1.y,p2.x,p2.y,q1.x,q1.y);
    const o2=orient(p1.x,p1.y,p2.x,p2.y,q2.x,q2.y);
    const o3=orient(q1.x,q1.y,q2.x,q2.y,p1.x,p1.y);
    const o4=orient(q1.x,q1.y,q2.x,q2.y,p2.x,p2.y);
    if(o1!==o2&&o3!==o4)return true;
    if(o1===0&&onSeg(p1.x,p1.y,p2.x,p2.y,q1.x,q1.y))return true;
    if(o2===0&&onSeg(p1.x,p1.y,p2.x,p2.y,q2.x,q2.y))return true;
    if(o3===0&&onSeg(q1.x,q1.y,q2.x,q2.y,p1.x,p1.y))return true;
    if(o4===0&&onSeg(q1.x,q1.y,q2.x,q2.y,p2.x,p2.y))return true;
    return false;
  }

  function crossesExisting(a,b){
    const p1=nodes[a],p2=nodes[b];
    for(const e of edges){
      const c=e.a,d=e.b;
      if(a===c||a===d||b===c||b===d)continue; 
      const q1=nodes[c],q2=nodes[d];
      if(segIntersect(p1,p2,q1,q2))return true;
    }
    return false;
  }

  function winCheck(){
    if(visited.size===nodes.length){
      msg.textContent="Tamam! Tüm noktalara temas ettin ✅";
    }
  }

  function addEdge(a,b){
    if(a===b)return;
    if(edgeExists(a,b)){msg.textContent="Bu çizgi zaten var.";return;}
    if(crossesExisting(a,b)){msg.textContent="Kesişme var, olmaz.";return;}
    edges.push({a,b});
    visited.add(a);visited.add(b);
    selected=b;
    msg.textContent="Devam: başka bir köşe seç.";
    draw();winCheck();
  }

  cv.addEventListener("click",e=>{
    const r=R(),x=e.clientX-r.left,y=e.clientY-r.top;
    const n=hitNode(x,y);
    if(n<0)return;
    if(selected<0){selected=n;visited.add(n);msg.textContent="Şimdi başka bir köşe seç.";draw();return;}
    addEdge(selected,n);
  });

  btn.addEventListener("click",init);
  window.addEventListener("resize",fit);
  fit();
})();
</script>

  </body>
</html>
