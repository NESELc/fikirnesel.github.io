<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SÄ±fÄ±r AraÃ§lar</title>
  <style>
body{margin:0;overflow:hidden;background:#EEEEEE;}
:root{--ustH:200px;}

#aracFiltreleme{font-family:Comic Sans MS;width:50%;max-width:50%;padding:10px;font-size:13px;}
.filtre-grup{display:flex;flex-wrap:wrap;gap:6px;align-items:center;margin-bottom:15px;}
.filtre-grup label{font-weight:bold;display:flex;flex-direction:column;font-size:13px;min-width:110px;}
.filtre-grup select{font-family:Comic Sans MS;padding:3px;font-size:13px;width:130px;}

#ustBar{position:fixed;top:0;left:0;right:0;z-index:1000;background:#EEEEEE;padding:10px;border-bottom:1px solid #ddd;}
#sonuclarWrap{position:fixed;left:0;right:0;bottom:0;top:var(--ustH);overflow:auto;padding:10px;}

#sonuclar{margin-top:0;}
#sonuclar table{font-family:Comic Sans MS;width:100%;border-collapse:collapse;font-size:13px;table-layout:fixed;}
#sonuclar th,#sonuclar td{border:1px solid #ccc;padding:6px;text-align:left;vertical-align:middle;white-space:normal;word-break:break-word;}
#sonuclar th{font-weight:bold;}
#sonuclar td.fiyat{font-weight:bold;color:darkgreen;white-space:nowrap;}
#sonuclar thead th{position:sticky;top:0;z-index:30;background:#BDBDBD;font-size:13px;border-bottom:2px solid #999;}
#sonuclar tbody tr:nth-child(odd)  { background:#FFFFFF; }
#sonuclar tbody tr:nth-child(even) { background:#EEEEEE; }

.tarihinfo{margin-top:0px;font-size:13px;min-height:13px;}
#markaButon{font-family:Comic Sans MS;font-size:13px;background:#EEEEEE;cursor:pointer;}
#markaModal{display:none;position:fixed;top:50px;left:50%;transform:translateX(-50%);background:#EEEEEE;border:1px solid #ccc;padding:20px;z-index:9999;max-width:400px;width:90%;box-shadow:0 0 10px rgba(0,0,0,0.2);border-radius:8px;}
#markaModal h4{margin-top:0;}
#markaModal ul{list-style:none;padding:0;font-size:13px;}
#markaModal ul li{margin-bottom:8px;}

@media (max-width:768px){
  #aracFiltreleme{width:100%;max-width:100%;}
  .filtre-grup{flex-direction:row;flex-wrap:wrap;gap:4px;align-items:flex-end;}
  .filtre-grup label{width:32%;min-width:0;}
  .filtre-grup select{width:100%;}
  #sonuclar table{font-size:10px;}
  #sonuclar th:nth-child(5),#sonuclar td:nth-child(5){width:12px;max-width:12px;font-size:8px;}
  #sonuclar th:nth-child(2),#sonuclar td:nth-child(2){width:54px;max-width:54px;font-size:10px;}
  #sonuclar th:nth-child(3),#sonuclar td:nth-child(3){width:42px;max-width:42px;font-size:8px;}
}

</style>

</head>
<body>
 
<div id="aracFiltreleme">
<div id="ustBar">
  <div class="tarihinfo" id="aracSayisi" style="margin-bottom: 10px;"></div>
  <div class="filtre-grup">
    <label>Marka:<select id="markaSec"><option value="">TÃ¼mÃ¼</option></select></label>
    <label>SÄ±nÄ±f:<select id="sinifSec"><option value="">TÃ¼mÃ¼</option></select></label>
    <label>Segment:<select id="segmentSec"><option value="">TÃ¼mÃ¼</option></select></label>
    <label>YakÄ±t TÃ¼rÃ¼:<select id="yakitSec"><option value="">TÃ¼mÃ¼</option></select></label>
    <label>Vites:<select id="vitesSec"><option value="">TÃ¼mÃ¼</option></select></label>
    <label>Fiyat:<select id="siralaSec">
      <option value="artan">Artan</option>
      <option value="azalan">Azalan</option>
    </select></label>
    <button id="markaButon">ğŸ”— Marka Linkleri</button>
  </div>
</div>
<div id="sonuclarWrap">
  <div id="sonuclar"></div>

  <div class="tarihinfo" id="tarihYazi"></div>
  	<div class="tarihinfo">
    * Bu sayfada yer alan araÃ§ fiyat ve Ã¶zellikleri, AralÄ±k 2025 itibarÄ±yla kamuya aÃ§Ä±k kaynaklardan (resmi web siteleri ve gÃ¼venilir satÄ±ÅŸ platformlarÄ±) derlenmiÅŸtir.
    <br>* Fiyatlar yalnÄ±zca bilgilendirme amaÃ§lÄ±dÄ±r ve markalarÄ±, distribÃ¼tÃ¶rleri veya bayileri baÄŸlayÄ±cÄ± nitelikte deÄŸildir.
    <br>* FarklÄ± versiyon, donanÄ±m seviyesi veya opsiyonlara gÃ¶re fiyatlar deÄŸiÅŸebilir. GÃ¼ncel ve kesin fiyat bilgisi iÃ§in lÃ¼tfen ilgili markanÄ±n resmi kanallarÄ±nÄ± ziyaret ediniz.
    <br>* Her bir marka ve model iÃ§in, aynÄ± sÄ±nÄ±f, segment ve yakÄ±t tÃ¼rÃ¼ne sahip versiyonlar arasÄ±ndan en dÃ¼ÅŸÃ¼k anahtar teslim fiyatlÄ± olan seÃ§ilmiÅŸtir.
    <br>* Bentley,Ferrari,Jaguar ve Maserari marka araÃ§lar iÃ§in resmi kaynaklarda fiyat bilgileri bulunmamaktadÄ±r.Bu markalar iÃ§in yapay zeka destekli tahmini fiyat ve Ã¶zellikler yer almaktadÄ±r. 
    <br>* Sayfa kodlarÄ± ve verileri ChatGPT, DeepSeek ve GROK kullanÄ±larak derlenmiÅŸtir.
  	</div>
  </div>
</div>
<!-- Marka ModalÄ± -->
<div id="markaModal">
  <h4>ğŸš˜ Marka Resmi Siteleri</h4>
  <div style="display: flex; flex-wrap: wrap; gap: 10px; font-size: 13px;">
  <label><a href="https://www.alfaromeo.com.tr" target="_blank">ğŸš— Alfa Romeo</a></label>
  <label><a href="https://www.audi.com.tr" target="_blank">ğŸš— Audi</a></label>
  <label><a href="https://istanbul.bentleymotors.com/eu/tr/home" target="_blank">ğŸš— Bentley</a></label>
  <label><a href="https://www.bmw.com.tr" target="_blank">ğŸš— BMW</a></label>
  <label><a href="https://www.bydauto.com.tr" target="_blank">ğŸš— BYD</a></label>
  <label><a href="https://cherytr.com" target="_blank">ğŸš— Chery</a></label>
  <label><a href="https://www.citroen.com.tr" target="_blank">ğŸš— CitroÃ«n</a></label>
  <label><a href="https://www.cupraofficial.com.tr" target="_blank">ğŸš— Cupra</a></label>
  <label><a href="https://www.dacia.com.tr" target="_blank">ğŸš— Dacia</a></label>
  <label><a href="https://www.dsautomobiles.com.tr" target="_blank">ğŸš— DS</a></label>
  <label><a href="https://istanbul.ferraridealers.com/en-GB" target="_blank">ğŸš— Ferrari</a></label>
  <label><a href="https://www.fiat.com.tr" target="_blank">ğŸš— Fiat</a></label>
  <label><a href="https://www.ford.com.tr" target="_blank">ğŸš— Ford</a></label>
  <label><a href="https://www.honda.com.tr" target="_blank">ğŸš— Honda</a></label>
  <label><a href="https://www.hyundai.com.tr" target="_blank">ğŸš— Hyundai</a></label>
  <label><a href="https://www.jaguar.com.tr" target="_blank">ğŸš— Jaguar</a></label>
  <label><a href="https://www.jeep.com.tr" target="_blank">ğŸš— Jeep</a></label>
  <label><a href="https://www.kia.com.tr" target="_blank">ğŸš— Kia</a></label>
  <label><a href="https://www.landrover.com.tr" target="_blank">ğŸš— Land Rover</a></label>
  <label><a href="https://www.lexus.com.tr" target="_blank">ğŸš— Lexus</a></label>
  <label><a href="https://www.maserati.com/tr/tr" target="_blank">ğŸš— Maserati</a></label>
  <label><a href="https://www.mazda.com.tr" target="_blank">ğŸš— Mazda</a></label>
  <label><a href="https://www.mercedes-benz.com.tr" target="_blank">ğŸš— Mercedes</a></label>
  <label><a href="https://www.mg-turkey.com/tr/" target="_blank">ğŸš— MG</a></label>
  <label><a href="https://www.mini.com.tr/tr_TR/home.html" target="_blank">ğŸš— Mini</a></label>
  <label><a href="https://www.nissan.com.tr" target="_blank">ğŸš— Nissan</a></label>
  <label><a href="https://www.opel.com.tr" target="_blank">ğŸš— Opel</a></label>
  <label><a href="https://www.peugeot.com.tr" target="_blank">ğŸš— Peugeot</a></label>
  <label><a href="https://www.porsche.com.tr" target="_blank">ğŸš— Porsche</a></label>
  <label><a href="https://www.renault.com.tr" target="_blank">ğŸš— Renault</a></label>
  <label><a href="https://www.seat.com.tr" target="_blank">ğŸš— SEAT</a></label>
  <label><a href="https://www.skoda.com.tr" target="_blank">ğŸš— Skoda</a></label>
  <label><a href="https://ssangyong2yoto.com/" target="_blank">ğŸš— Ssangyong</a></label>
  <label><a href="https://www.subaru.com.tr/index" target="_blank">ğŸš— Subaru</a></label>
  <label><a href="https://www.suzuki.com.tr" target="_blank">ğŸš— Suzuki</a></label>
  <label><a href="https://www.tesla.com/tr_tr" target="_blank">ğŸš— Tesla</a></label>
  <label><a href="https://www.toyota.com.tr" target="_blank">ğŸš— Toyota</a></label>
  <label><a href="https://www.togg.com.tr" target="_blank">ğŸš— TOGG</a></label>
  <label><a href="https://www.vw.com.tr/" target="_blank">ğŸš— Volkswagen</a></label>
  <label><a href="https://www.volvocars.com/tr" target="_blank">ğŸš— Volvo</a></label>

	</div>
</div>

<script>
	
  	document.getElementById("markaButon").addEventListener("click", function(e){
  	e.preventDefault();
  	e.stopPropagation();   // âœ… ÅŸart
  	document.getElementById("markaModal").style.display="block";
	});
  
window.addEventListener("pointerdown", function(event) {
  const modal = document.getElementById("markaModal");
  if (
    modal.style.display === "block" &&
    !modal.contains(event.target) &&
    event.target.id !== "markaButon"
  ) {
    modal.style.display = "none";
  }
});

  var tumVeri = [], guncellemeTarihi = "";
  async function veriYukle() {
    const url = "https://script.google.com/macros/s/AKfycbzwPXMtL657ud1Ydq4k2p2sArDQjIIiU85TnuWuFfH3aQhRYTaIpGKyquTzmi5qFbEl/exec";
    const response = await fetch(url);
    const data = await response.json();
    tumVeri = data.filter(d => d.marka);
    guncellemeTarihi = data.find(d => d.guncelleme)?.guncelleme || "";

    const unique = key => [...new Set(tumVeri.map(item => item[key]?.toLowerCase().trim()).filter(Boolean))];
    const secimYukle = (id, key) => {
      const select = document.getElementById(id);
      select.innerHTML = '<option value="">TÃ¼mÃ¼</option>';
      unique(key).sort().forEach(val => {
        const opt = document.createElement("option");
        opt.value = val;
        opt.textContent = val.charAt(0).toUpperCase() + val.slice(1);
        select.appendChild(opt);
      });
    };

    secimYukle("markaSec", "marka");
    secimYukle("sinifSec", "sÄ±nÄ±f");
    secimYukle("yakitSec", "yakÄ±t tÃ¼rÃ¼");
    secimYukle("vitesSec", "vites");

    const segmentSirasi = ["a", "b", "c", "d", "e", "f", "s"];
    const segmentler = unique("segment");
    const segmentSelect = document.getElementById("segmentSec");
    segmentSelect.innerHTML = '<option value="">TÃ¼mÃ¼</option>';
    segmentSirasi.forEach(seg => {
      if (segmentler.includes(seg)) {
        const opt = document.createElement("option");
        opt.value = seg;
        opt.textContent = seg.toUpperCase();
        segmentSelect.appendChild(opt);
      }
    });

    ["markaSec", "sinifSec", "segmentSec", "yakitSec", "vitesSec", "siralaSec"].forEach(id => {
		document.getElementById(id).addEventListener("change", filtreleVeGoster);
    });

    filtreleVeGoster();
    if (guncellemeTarihi) { document.getElementById("tarihYazi").textContent = "Son gÃ¼ncelleme tarihi: " + guncellemeTarihi;  }
  }

function formatTarih(isoStr) {
  if (!isoStr) return "";
  const d = new Date(isoStr);
  const gun  = String(d.toLocaleString("tr-TR", { timeZone: "Europe/Istanbul", day: "2-digit" }));
  const ay   = String(d.toLocaleString("tr-TR", { timeZone: "Europe/Istanbul", month: "2-digit" }));
  const yil  = d.toLocaleString("tr-TR", { timeZone: "Europe/Istanbul", year: "numeric" });

  if(window.innerWidth<=768){return `${ay}.${yil.slice(2)}`;}
return `${ay}.${yil}`;
}

  function filtreleVeGoster() {
    const getVal = id => document.getElementById(id).value.trim().toLowerCase();
    const siralama = getVal("siralaSec");

    let filtreli = tumVeri.filter(item => {
      return (!getVal("markaSec") || item.marka.toLowerCase().trim() === getVal("markaSec")) &&
             (!getVal("sinifSec") || item["sÄ±nÄ±f"].toLowerCase().trim() === getVal("sinifSec")) &&
             (!getVal("segmentSec") || item.segment.toLowerCase().trim() === getVal("segmentSec")) &&
             (!getVal("yakitSec") || item["yakÄ±t tÃ¼rÃ¼"].toLowerCase().trim() === getVal("yakitSec")) &&
             (!getVal("vitesSec") || item.vites.toLowerCase().trim() === getVal("vitesSec"));
    });

    filtreli.sort((a, b) => parseInt(siralama === "artan" ? a.fiyat - b.fiyat : b.fiyat - a.fiyat));

	let html = "<table><thead><tr><th>FÄ°YAT - binTL</th><th>MARKA</th><th>MODEL</th><th>SINIF</th><th>SEGMENT</th><th>YAKIT</th><th>VÄ°TES</th><th>GÃœNCELLEME</th></tr></thead><tbody>";
    filtreli.forEach(item => {
      const fiyat = Math.round(Number(item.fiyat) / 1000).toLocaleString("tr-TR");
      html += `<tr>
        <td class="fiyat">${fiyat}</td>
        <td>${item.marka}</td>
        <td>${item.model}</td>
        <td>${item["sÄ±nÄ±f"]}</td>
        <td>${item.segment?.toUpperCase() || ""}</td>
        <td>${item["yakÄ±t tÃ¼rÃ¼"]}</td>
        <td>${item.vites}</td>
        <td>${formatTarih(item.guncelleme) || ""}</td>
      </tr>`;
    });
    html += "</tbody></table>";
    document.getElementById("sonuclar").innerHTML = html;
    mobilSegmentBaslik();
	  const markaSayisi = new Set(filtreli.map(item => item.marka)).size;

  // ğŸ·ï¸ SeÃ§ili filtreleri hazÄ±rla
  const filtreAciklamalari = [];
  const filtreEtiketi = (id, baslik) => {
    const secim = document.getElementById(id).value.trim();
    if (secim) {
      filtreAciklamalari.push(`${baslik}: ${secim.charAt(0).toUpperCase() + secim.slice(1)}`);
    }
  };

  filtreEtiketi("markaSec", "Marka");
  filtreEtiketi("sinifSec", "SÄ±nÄ±f");
  filtreEtiketi("segmentSec", "Segment");
  filtreEtiketi("yakitSec", "YakÄ±t");
  filtreEtiketi("vitesSec", "Vites");

  // ğŸš€ AraÃ§Sayisi yazÄ±sÄ±na araÃ§+marka bilgisi + filtre Ã¶zetini yaz
  let yazÄ± = `${filtreli.length} araÃ§, ${markaSayisi} farklÄ± marka listelendi.`;
  if (filtreAciklamalari.length > 0) {
    yazÄ± += " | " + filtreAciklamalari.join(" | ");
  }

  document.getElementById("aracSayisi").textContent = yazÄ±;
	setUstH();
  }

  veriYukle();
  window.addEventListener("pageshow", function(event) {
    if (event.persisted) {
      veriYukle();
    }
  });
  
  function mobilSegmentBaslik(){
if(window.innerWidth<=768){
	document.querySelectorAll("#sonuclar th")[0].textContent="Fiyat";
	document.querySelectorAll("#sonuclar th")[4].textContent="Sg";
  	document.querySelectorAll("#sonuclar th")[7].textContent="GÃ¼n.";
	document.querySelectorAll("#sonuclar tr td:nth-child(4)").forEach(td=>td.textContent.trim().toLowerCase()=="hatchback"&&(td.textContent="HB"));
  	document.querySelectorAll("#sonuclar tr td:nth-child(4)").forEach(td=>td.textContent.trim().toLowerCase()=="sedan"&&(td.textContent="Sed."));
  	document.querySelectorAll("#sonuclar tr td:nth-child(6)").forEach(td=>td.textContent.trim().toLowerCase()=="elektrikli"&&(td.textContent="Elk."));
    document.querySelectorAll("#sonuclar tr td:nth-child(6)").forEach(td=>td.textContent.trim().toLowerCase()=="benzinli"&&(td.textContent="Benz."));
  	document.querySelectorAll("#sonuclar tr td:nth-child(7)").forEach(td=>td.textContent.trim().toLowerCase()=="otomatik"&&(td.textContent="Oto."));
  	document.querySelectorAll("#sonuclar tr td:nth-child(7)").forEach(td=>td.textContent.trim().toLowerCase()=="manuel"&&(td.textContent="Man."));
}else{
	document.querySelectorAll("#sonuclar th")[0].textContent="FÄ°YAT-binTL";
	document.querySelectorAll("#sonuclar th")[4].textContent="SEGMENT";
  	document.querySelectorAll("#sonuclar th")[7].textContent="GÃœNCELLEME";
	document.querySelectorAll("#sonuclar tr td:nth-child(4)").forEach(td=>td.textContent=="HB"&&(td.textContent="Hatchback"));
  	document.querySelectorAll("#sonuclar tr td:nth-child(4)").forEach(td=>td.textContent=="Sed."&&(td.textContent="Sedan"));
	document.querySelectorAll("#sonuclar tr td:nth-child(6)").forEach(td=>td.textContent=="Elk."&&(td.textContent="Elektrikli"));
  	document.querySelectorAll("#sonuclar tr td:nth-child(6)").forEach(td=>td.textContent=="Benz."&&(td.textContent="Benzinli"));
  	document.querySelectorAll("#sonuclar tr td:nth-child(7)").forEach(td=>td.textContent=="Oto."&&(td.textContent="Otomatik"));
  	document.querySelectorAll("#sonuclar tr td:nth-child(7)").forEach(td=>td.textContent=="Man."&&(td.textContent="Manuel"));
	}
  }
window.addEventListener("resize",mobilSegmentBaslik);
function fixLayout(){
  const u=document.getElementById("ustBar");
  const s=document.getElementById("sonuclarWrap");
  if(u&&s){s.style.top=(u.offsetHeight)+"px";}
}
window.addEventListener("load",fixLayout);
window.addEventListener("resize",fixLayout);
function setUstH(){
  const u=document.getElementById("ustBar");
  if(!u) return;
  document.documentElement.style.setProperty("--ustH", (u.offsetHeight)+"px");
}
setUstH();
</script>
  </body>
  </html>
